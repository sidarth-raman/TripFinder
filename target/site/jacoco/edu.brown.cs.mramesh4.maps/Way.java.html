<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Way.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">TripFinder</a> &gt; <a href="index.source.html" class="el_package">edu.brown.cs.mramesh4.maps</a> &gt; <span class="el_source">Way.java</span></div><h1>Way.java</h1><pre class="source lang-java linenums">package edu.brown.cs.mramesh4.maps;

import edu.brown.cs.mramesh4.Graph.GraphEdge;

/**
 * This class represents a Way object from the database. It implements
 * GraphEdge so that it can be used in our generic Graph class.
 */
public class Way implements GraphEdge&lt;WayNodes, Way&gt; {

  private final String id;
  private WayNodes from;
  private WayNodes to;
  private transient double distance;
  private static final double EARTH_RADIUS_IN_KM = 6371;
  private String type;

  /**
   * In the constructor, we intialize our instance variables using the
   * arguments passed in.
   * @param idArg representing id of way.
   * @param fromArg representing starting node of way
   * @param toArg representing ending node of way
   * @param type Type of node that we are using
   */
<span class="nc" id="L26">  public Way(String idArg, WayNodes fromArg, WayNodes toArg, String type) {</span>
<span class="nc" id="L27">    id = idArg;</span>
<span class="nc" id="L28">    from = fromArg;</span>
<span class="nc" id="L29">    to = toArg;</span>
<span class="nc" id="L30">    this.type = type;</span>
    //use helper method to calculate distance, or weight, of Way
<span class="nc" id="L32">    distance = this.getHaversineDistance(from, to);</span>
<span class="nc" id="L33">  }</span>

  /**
   * Accesor method for type.
   * @return a type variable
   */
  public String getType() {
<span class="nc" id="L40">    return this.type;</span>
  }

  /**
   * Calculates the distance between two waynodes objects.
   * The code for this uses the haversine formula from:
   * https://www.geeksforgeeks.org/program-distance-two-points-earth/
   * @param a first Waynode
   * @param b second Waynode
   * @return double representing haversine distance
   */
  public double getHaversineDistance(WayNodes a, WayNodes b) {
<span class="nc bnc" id="L52" title="All 4 branches missed.">    if (a == null || b == null) {</span>
<span class="nc" id="L53">      return -1;</span>
    }
<span class="nc" id="L55">    double lat1 = Math.toRadians(a.getLat());</span>
<span class="nc" id="L56">    double lon1 = Math.toRadians(a.getLong());</span>
<span class="nc" id="L57">    double lat2 = Math.toRadians(b.getLat());</span>
<span class="nc" id="L58">    double lon2 = Math.toRadians(b.getLong());</span>
    /**
     * Haversine formula: I got this from
     * https://www.geeksforgeeks.org/program-distance-two-points-earth/
     */
<span class="nc" id="L63">    double dlon = lon2 - lon1;</span>
<span class="nc" id="L64">    double dlat = lat2 - lat1;</span>
<span class="nc" id="L65">    double havernmath = Math.pow(Math.sin(dlat / 2), 2)</span>
<span class="nc" id="L66">            + Math.cos(lat1) * Math.cos(lat2)</span>
<span class="nc" id="L67">            * Math.pow(Math.sin(dlon / 2), 2);</span>
<span class="nc" id="L68">    double finalanswer = 2 * Math.asin(Math.sqrt(havernmath));</span>
    // Represents radius of earth in kilometers. Use 3956 for miles
<span class="nc" id="L70">    return (finalanswer * EARTH_RADIUS_IN_KM);</span>
  }

  /**
   * Returns the from WayNode.
   * @return WayNode representing from WayNode
   */
  @Override
  public WayNodes getFrom() {
<span class="nc" id="L79">    return from;</span>
  }

  /**
   * Returns the to WayNode.
   * @return WayNode representing to WayNode
   */
  @Override
  public WayNodes getTo() {
<span class="nc" id="L88">    return to;</span>
  }

  /**
   * Returns WayNode distance, or weight.
   * @return double representing distance between WayNodes
   */
  @Override
  public double getWeight() {
<span class="nc" id="L97">    return distance;</span>
  }

  /**
   * Getter method for id.
   * @return String reprenting ID
   */
  public String getId() {
<span class="nc" id="L105">    return id;</span>
  }

  /**
   * Setter method for from.
   * @param w waynode to set
   */
  public void setFrom(WayNodes w) {
<span class="nc" id="L113">    from = w;</span>
<span class="nc" id="L114">    distance = getHaversineDistance(to, from);</span>
<span class="nc" id="L115">  }</span>

  /**
   * Setter method for to.
   * @param w waynode to set
   */
  public void setTo(WayNodes w) {
<span class="nc" id="L122">    to = w;</span>
<span class="nc" id="L123">    distance = getHaversineDistance(to, from);</span>
<span class="nc" id="L124">  }</span>

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.5.201910111838</span></div></body></html>